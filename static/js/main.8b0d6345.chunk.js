(this.webpackJsonptwitchsubathon=this.webpackJsonptwitchsubathon||[]).push([[0],{25:function(e,n,t){"use strict";t.r(n);var c=t(0),r=t.n(c),i=t(10),a=t.n(i),s=(t(21),t(2)),o=t(3),l=t(4),d=t(16),u=t(11),b=t.n(u),j=t(12),h=t(1);var f,O,p,g,x=function(e){var n=e.children,t=Object(c.useState)(!1),r=Object(s.a)(t,2),i=r[0],a=r[1],o=Object(c.useRef)(null);return Object(c.useEffect)((function(){var e=Object(j.a)(n,"normal 800 25px sans-serif");a(e>o.current.offsetWidth)}),[n]),Object(h.jsx)("div",{ref:o,children:i?Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(b.a,{gradient:!1,speed:40,children:[n,"\xa0-\xa0"]})}):Object(h.jsx)(h.Fragment,{children:n})})};var m,w,v,S,k,y,D,C=function(e){var n=Math.abs(parseInt(e/60/60)).toString().padStart(2,"0"),t=Math.abs(parseInt(e/60%60)).toString().padStart(2,"0"),c=Math.abs(parseInt(e%60)).toString().padStart(2,"0");return"".concat(e<0?"-":"").concat(n,":").concat(t,":").concat(c)},I=l.a.span(f||(f=Object(o.a)(["\n  \n  animation: blinkRecentlyAdded step-end 0.3s infinite;\n\n  @keyframes blinkRecentlyAdded{\n    0% {\n      color: transparent;\n    }\n    50% {\n      color: green;\n    }\n    100% {\n      color: transparent;\n    }\n  }\n"]))),A=l.a.span(O||(O=Object(o.a)(["\n  color: red;\n"]))),M=l.a.span(p||(p=Object(o.a)(["\n  \n  animation: blinkCritical step-end 0.6s infinite;\n\n  @keyframes blinkCritical{\n    0% {\n      color: transparent;\n    }\n    30% {\n      color: red;\n    }\n    70% {\n      color: red;\n    }\n    100% {\n      color: transparent;\n    }\n  }\n"]))),N=l.a.span(g||(g=Object(o.a)(["\n  color: black;\n"]))),P=function(e){var n=e.endDate,t=e.timeLastAdded,r=Object(c.useState)(!1),i=Object(s.a)(r,2),a=i[0],o=i[1],l=Object(c.useState)(""),d=Object(s.a)(l,2),u=d[0],b=d[1],j=Object(c.useState)(!1),f=Object(s.a)(j,2),O=f[0],p=f[1],g=Object(c.useState)(!1),x=Object(s.a)(g,2),m=x[0],w=x[1];return Object(c.useEffect)((function(){var e=setInterval((function(){o(new Date-t<=3e3),p(n-new Date<=36e5),w(n-new Date<=3e5),b(C(new Date(n-new Date)/1e3))}),200);return function(){return clearInterval(e)}}),[n,t]),a?Object(h.jsx)(I,{children:u}):m?Object(h.jsx)(M,{children:u}):O?Object(h.jsx)(A,{children:u}):Object(h.jsx)(N,{children:u})};var R=l.a.div(m||(m=Object(o.a)(["\n  font-weight: bold;\n  text-transform: uppercase;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  text-align: left;\n  width: 100%;\n"]))),T=l.a.div(w||(w=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 65%;\n  align-items: flex-start;\n"]))),E=l.a.div(v||(v=Object(o.a)(["\n  font-size: 3rem;\n  width: 35%;\n"]))),G=l.a.div(S||(S=Object(o.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n"]))),J=l.a.div(k||(k=Object(o.a)(["\n  .progress-bar{\n    background-color: black;\n  }\n"]))),L=l.a.div(y||(y=Object(o.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n"]))),U=l.a.div(D||(D=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  padding: 0.5rem;\n  font-size: 1.5rem;\n  color: black;\n  background-color: grey;\n  width: 600px;\n  height: 150px;\n  margin: auto;\n  margin-top: 1rem;\n"]))),W=function(e){var n=e.config,t=e.subsThisStream,r=Object(c.useState)(new Date(Date.now()+60*n.initialMinutes*1e3)),i=Object(s.a)(r,2),a=i[0],o=i[1],l=Object(c.useState)(new Date(0)),u=Object(s.a)(l,2),b=u[0],j=u[1],f=function(){var e=Object.entries(n.goals).sort((function(e){return e[0]})).filter((function(e){return e[0]<=t}));return e.length>0?e[e.length-1]:[0,"No goal achieved"]},O=function(){var e=[1/0,"All goals achieved"],c=Object.entries(n.goals).sort((function(e){return e[0]})).filter((function(e){return e[0]>t}));return c.length>0?c[0]:e},p=function(e){g(e*n.secondsPerSub)},g=function(e){j(Date.now()),o(new Date(a.getTime()+1e3*e))};return Object(h.jsxs)("div",{className:"App",children:[Object(h.jsxs)(U,{children:[Object(h.jsxs)(G,{children:[Object(h.jsxs)(T,{children:[Object(h.jsxs)("span",{children:[O()[0]-t," subs needed for:"]}),Object(h.jsx)(R,{children:Object(h.jsx)(x,{children:O()[1]})})]}),Object(h.jsx)(E,{children:Object(h.jsx)(P,{endDate:a,timeLastAdded:b})})]}),Object(h.jsxs)(J,{children:[Object(h.jsx)(d.a,{animated:!0,now:t,min:f()[0],max:O()[0]}),Object(h.jsxs)(L,{children:[Object(h.jsx)("span",{children:f()[0]}),Object(h.jsx)("span",{children:t}),Object(h.jsx)("span",{children:O()[0]})]})]})]}),Object(h.jsxs)("div",{style:{textAlign:"center"},children:[Object(h.jsx)("button",{style:{marginTop:10},onClick:function(){return p(1)},children:"Add sub"}),Object(h.jsx)("button",{style:{marginLeft:10},onClick:function(){return p(10)},children:"Add 10 subs"}),Object(h.jsx)("br",{}),Object(h.jsx)("button",{style:{marginTop:10},onClick:function(){return p(-1)},children:"Remove sub"}),Object(h.jsx)("button",{style:{marginLeft:10},onClick:function(){return p(-10)},children:"Remove 10 subs"})]})]})};var F=function(){var e=Object(c.useState)("Loading..."),n=Object(s.a)(e,2),t=n[0],r=n[1],i=Object(c.useState)({goals:{10:"Do a thing",25:"Do another thing",50:"Do the last thing"},twitchUsername:"twitchusergoeshere",initialMinutes:60,secondsPerSub:600,secondsPerBit:.6,secondsPerPenny:.6}),a=Object(s.a)(i,1)[0],o=Object(c.useState)(0),l=Object(s.a)(o,2),d=l[0],u=l[1],b=Object(c.useRef)(null);Object(c.useEffect)((function(){return b.current=new WebSocket("wss://irc-ws.chat.twitch.tv/"),b.current.onopen=function(){r("Connecting..."),b.current.send("NICK "+j()),r("Joining Twitch chat..."),b.current.send("JOIN #"+a.twitchUsername),r("")},b.current.onerror=function(){r("\ud83d\uded1 Connection to Twitch Chat Error \ud83d\uded1")},b.current.onclose=function(){r("\ud83d\uded1 Connection to Twitch Closed \ud83d\uded1")},function(){b.current.close()}}),[a]),Object(c.useEffect)((function(){b.current&&(b.current.onmessage=function(e){var n=e.data;if(n.startsWith("PING :tmi.twitch.tv"))return console.log("Received a PING, sending back PONG"),void b.current.send("PONG :tmi.twitch.tv");if(n.includes("PRIVMSG")){var t=n.split("#")[1],c=t.substring(t.indexOf(":")+1).split("\r\n")[0];if(n.split("@")[1].split(".tmi.twitch.tv")[0]===a.twitchUsername)"test"===c&&u(d+1)}else n.includes("Welcome")||n.includes("JOIN")||n.includes("NAMES")?console.log("Received a known, ignored, message",n):console.error("Unhandled message",n)})}));var j=function(){return"justinfan"+(Math.floor(9e4*Math.random())+9999)};return Object(h.jsx)(h.Fragment,{children:t.length>0&&void 0!==a?Object(h.jsx)("span",{children:t}):Object(h.jsx)(W,{config:a,subsThisStream:d})})};a.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(F,{})}),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.8b0d6345.chunk.js.map