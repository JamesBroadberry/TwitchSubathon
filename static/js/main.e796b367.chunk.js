(this.webpackJsonptwitchsubathon=this.webpackJsonptwitchsubathon||[]).push([[0],{25:function(e,n,t){"use strict";t.r(n);var c=t(0),i=t.n(c),r=t(10),a=t.n(r),s=(t(21),t(2)),o=t(3),l=t(4),d=t(16),j=t(11),b=t.n(j),u=t(12),h=t(1);var O,f,p,g,x=function(e){var n=e.children,t=Object(c.useState)(!1),i=Object(s.a)(t,2),r=i[0],a=i[1],o=Object(c.useRef)(null);return Object(c.useEffect)((function(){var e=Object(u.a)(n,"normal 800 25px sans-serif");a(e>o.current.offsetWidth)}),[n]),Object(h.jsx)("div",{ref:o,children:r?Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(b.a,{gradient:!1,speed:40,children:[n,"\xa0-\xa0"]})}):Object(h.jsx)(h.Fragment,{children:n})})};var m,v,w,S,k,y,D,C=function(e){var n=Math.abs(parseInt(e/60/60)).toString().padStart(2,"0"),t=Math.abs(parseInt(e/60%60)).toString().padStart(2,"0"),c=Math.abs(parseInt(e%60)).toString().padStart(2,"0");return"".concat(e<0?"-":"").concat(n,":").concat(t,":").concat(c)},I=l.a.span(O||(O=Object(o.a)(["\n  \n  animation: blinkRecentlyAdded step-end 0.3s infinite;\n\n  @keyframes blinkRecentlyAdded{\n    0% {\n      color: transparent;\n    }\n    50% {\n      color: green;\n    }\n    100% {\n      color: transparent;\n    }\n  }\n"]))),A=l.a.span(f||(f=Object(o.a)(["\n  color: red;\n"]))),M=l.a.span(p||(p=Object(o.a)(["\n  \n  animation: blinkCritical step-end 0.6s infinite;\n\n  @keyframes blinkCritical{\n    0% {\n      color: transparent;\n    }\n    30% {\n      color: red;\n    }\n    70% {\n      color: red;\n    }\n    100% {\n      color: transparent;\n    }\n  }\n"]))),N=l.a.span(g||(g=Object(o.a)(["\n  color: black;\n"]))),P=function(e){var n=e.endDate,t=e.timeLastAdded,i=Object(c.useState)(!1),r=Object(s.a)(i,2),a=r[0],o=r[1],l=Object(c.useState)(""),d=Object(s.a)(l,2),j=d[0],b=d[1],u=Object(c.useState)(!1),O=Object(s.a)(u,2),f=O[0],p=O[1],g=Object(c.useState)(!1),x=Object(s.a)(g,2),m=x[0],v=x[1];return Object(c.useEffect)((function(){var e=setInterval((function(){o(new Date-t<=3e3),p(n-new Date<=36e5),v(n-new Date<=3e5),b(C(new Date(n-new Date)/1e3))}),200);return function(){return clearInterval(e)}}),[n,t]),a?Object(h.jsx)(I,{children:j}):m?Object(h.jsx)(M,{children:j}):f?Object(h.jsx)(A,{children:j}):Object(h.jsx)(N,{children:j})};var R=l.a.div(m||(m=Object(o.a)(["\n  font-weight: bold;\n  text-transform: uppercase;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  text-align: left;\n  width: 100%;\n"]))),E=l.a.div(v||(v=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 65%;\n  align-items: flex-start;\n"]))),T=l.a.div(w||(w=Object(o.a)(["\n  font-size: 3rem;\n  width: 35%;\n"]))),G=l.a.div(S||(S=Object(o.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n"]))),J=l.a.div(k||(k=Object(o.a)(["\n  .progress-bar{\n    background-color: black;\n  }\n"]))),L=l.a.div(y||(y=Object(o.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n"]))),U=l.a.div(D||(D=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  padding: 0.5rem;\n  font-size: 1.5rem;\n  color: black;\n  background-color: grey;\n  width: 600px;\n  height: 150px;\n  margin: auto;\n  margin-top: 1rem;\n"]))),W=function(e){var n=e.config,t=Object(c.useState)(0),i=Object(s.a)(t,2),r=i[0],a=i[1],o=Object(c.useState)(new Date(Date.now()+60*n.initialMinutes*1e3)),l=Object(s.a)(o,2),j=l[0],b=l[1],u=Object(c.useState)(new Date(0)),O=Object(s.a)(u,2),f=O[0],p=O[1],g=function(){var e=Object.entries(n.goals).sort((function(e){return e[0]})).filter((function(e){return e[0]<=r}));return e.length>0?e[e.length-1]:[0,"No goal achieved"]},m=function(){var e=[1/0,"All goals achieved"],t=Object.entries(n.goals).sort((function(e){return e[0]})).filter((function(e){return e[0]>r}));return t.length>0?t[0]:e},v=function(e){a(r+e),w(e*n.secondsPerSub)},w=function(e){p(Date.now()),b(new Date(j.getTime()+1e3*e))};return Object(h.jsxs)("div",{className:"App",children:[Object(h.jsxs)(U,{children:[Object(h.jsxs)(G,{children:[Object(h.jsxs)(E,{children:[Object(h.jsxs)("span",{children:[m()[0]-r," subs needed for:"]}),Object(h.jsx)(R,{children:Object(h.jsx)(x,{children:m()[1]})})]}),Object(h.jsx)(T,{children:Object(h.jsx)(P,{endDate:j,timeLastAdded:f})})]}),Object(h.jsxs)(J,{children:[Object(h.jsx)(d.a,{animated:!0,now:r,min:g()[0],max:m()[0]}),Object(h.jsxs)(L,{children:[Object(h.jsx)("span",{children:g()[0]}),Object(h.jsx)("span",{children:r}),Object(h.jsx)("span",{children:m()[0]})]})]})]}),Object(h.jsxs)("div",{style:{textAlign:"center"},children:[Object(h.jsx)("button",{style:{marginTop:10},onClick:function(){return v(1)},children:"Add sub"}),Object(h.jsx)("button",{style:{marginLeft:10},onClick:function(){return v(10)},children:"Add 10 subs"}),Object(h.jsx)("br",{}),Object(h.jsx)("button",{style:{marginTop:10},onClick:function(){return v(-1)},children:"Remove sub"}),Object(h.jsx)("button",{style:{marginLeft:10},onClick:function(){return v(-10)},children:"Remove 10 subs"})]})]})};var F=function(){var e=Object(c.useState)("Loading..."),n=Object(s.a)(e,2),t=n[0],i=n[1],r=Object(c.useState)({goals:{10:"Do a thing",25:"Do another thing",50:"Do the last thing"},twitchUsername:"twitchusergoeshere",initialMinutes:60,secondsPerSub:600,secondsPerBit:.6,secondsPerPenny:.6}),a=Object(s.a)(r,1)[0];Object(c.useEffect)((function(){var e=new WebSocket("wss://irc-ws.chat.twitch.tv/");return e.onmessage=function(n){var t=n.data;if(t.startsWith("PING :tmi.twitch.tv"))return console.log("Received a PING, sending back PONG"),void e.send("PONG :tmi.twitch.tv");if(t.includes("PRIVMSG")){var c=t.split("#")[1];c.substring(c.indexOf(":")+1).split("\r\n")[0],t.split("@")[1].split(".tmi.twitch.tv")[0];a.twitchUsername}else t.includes("Welcome")||t.includes("JOIN")||t.includes("NAMES")?console.log("Received a known, ignored, message",t):console.error("Unhandled message",t)},e.onopen=function(){i("Connecting..."),e.send("NICK "+o()),i("Joining Twitch chat..."),e.send("JOIN #"+a.twitchUsername),i("")},e.onerror=function(){i("\ud83d\uded1 Connection to Twitch Chat Error \ud83d\uded1")},e.onclose=function(){i("\ud83d\uded1 Connection to Twitch Closed \ud83d\uded1")},function(){e.close()}}),[a]);var o=function(){return"justinfan"+(Math.floor(9e4*Math.random())+9999)};return Object(h.jsx)(h.Fragment,{children:t.length>0&&void 0!==a?Object(h.jsx)("span",{children:t}):Object(h.jsx)(W,{config:a})})};a.a.render(Object(h.jsx)(i.a.StrictMode,{children:Object(h.jsx)(F,{})}),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.e796b367.chunk.js.map